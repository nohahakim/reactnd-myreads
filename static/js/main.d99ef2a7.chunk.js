(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{13:function(e,s,t){},18:function(e,s,t){},19:function(e,s,t){"use strict";t.r(s);var a=t(0),o=t.n(a),c=t(7),n=t.n(c),r=t(5);const h="https://reactnd-books-api.udacity.com";let i=localStorage.token;i||(i=localStorage.token=Math.random().toString(36).substr(-8));const l={Accept:"application/json",Authorization:i};t(13);var d=t(2),b=t(4),j=t(1);var u=function(e){const{book:s,shelfChanger:t}=e;return Object(j.jsx)("div",{className:"book-shelf-changer",children:Object(j.jsxs)("select",{value:s.shelf||"none",onChange:e=>{t(s,e.target.value)},children:[Object(j.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(j.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(j.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(j.jsx)("option",{value:"read",children:"Read"}),Object(j.jsx)("option",{value:"none",children:"None"})]})})};var p=function(e){const{book:s,shelfChanger:t}=e;return Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"book-top",children:[Object(j.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:s.imageLinks&&"url(".concat(s.imageLinks.thumbnail,")")}}),Object(j.jsx)(u,{book:s,shelfChanger:t})]}),Object(j.jsx)("div",{className:"book-title",children:s.title}),Object(j.jsx)("div",{className:"book-authors",children:s.authors&&s.authors.join(", ")})]})};var O=function(e){const{books:s,shelfChanger:t,name:a}=e;return Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:a}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:s.map((e=>Object(j.jsx)(p,{shelfChanger:t,book:e},e.id)))})})]})};var f=function(e){const{books:s,shelfChanger:t}=e;return Object(j.jsxs)("div",{className:"list-books",children:[Object(j.jsx)("div",{className:"list-books-title",children:Object(j.jsx)("h1",{children:"MyReads"})}),Object(j.jsx)("div",{className:"list-books-content",children:Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{shelfChanger:t,name:"Currently Reading",books:s.filter((e=>"currentlyReading"===e.shelf))},"currentReadShelf"),Object(j.jsx)(O,{shelfChanger:t,name:"Want To Read",books:s.filter((e=>"wantToRead"===e.shelf))},"wantReadShelf"),Object(j.jsx)(O,{shelfChanger:t,name:"Read",books:s.filter((e=>"read"===e.shelf))},"readShelf")]})}),Object(j.jsx)("div",{className:"open-search",children:Object(j.jsx)(b.b,{to:"/search",children:"Add a book"})})]})},x=t(8);class k extends a.Component{constructor(){super(...arguments),this.state={query:""},this.updateQuery=e=>{this.setState({query:e}),this.props.updateSearch(e)}}render(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"search-books",children:[Object(j.jsxs)("div",{className:"search-books-bar",children:[Object(j.jsx)(b.b,{to:"/",className:"close-search",children:"Close"}),Object(j.jsx)("div",{className:"search-books-input-wrapper",onSubmit:e=>e.preventDefault(),children:Object(j.jsx)(x.DebounceInput,{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:e=>this.updateQuery(e.target.value),debounceTimeout:300})})]}),Object(j.jsx)("div",{className:"search-books-results",children:Object(j.jsx)("ol",{className:"books-grid",children:this.props.searchResults.map((e=>Object(j.jsx)(p,{shelfChanger:this.props.shelfChanger,book:e},e.id)))})})]})})}}var m=k;class v extends o.a.Component{constructor(){super(...arguments),this.state={books:[],searchResults:[]},this.updateSearch=e=>{e?(e=>fetch("".concat(h,"/search"),{method:"POST",headers:Object(r.a)(Object(r.a)({},l),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((e=>e.json())).then((e=>e.books)))(e.trim()).then((e=>{if(e.error)return this.setState({searchResults:[]});e.map((s=>(this.state.books.forEach((e=>{s.id===e.id&&(s.shelf=e.shelf)})),this.setState({searchResults:e}))))})):this.setState({searchResults:[]})},this.shelfChanger=(e,s)=>{((e,s)=>fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(r.a)(Object(r.a)({},l),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:s})}).then((e=>e.json())))(e,s).then((t=>{e.shelf=s,this.setState((s=>({books:s.books.filter((s=>s.id!==e.id)).concat([e])})))}))}}async componentDidMount(){const e=await fetch("".concat(h,"/books"),{headers:l}).then((e=>e.json())).then((e=>e.books));this.setState({books:e})}render(){return Object(j.jsx)("div",{children:Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",element:Object(j.jsx)(f,{books:this.state.books,shelfChanger:this.shelfChanger})}),Object(j.jsx)(d.a,{exact:!0,path:"search",element:Object(j.jsx)(m,{searchResults:this.state.searchResults,updateSearch:this.updateSearch,shelfChanger:this.shelfChanger})})]})})}}var g=v;t(18);n.a.render(Object(j.jsx)(b.a,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.d99ef2a7.chunk.js.map